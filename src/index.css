@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
@import "tailwindcss";

body {
  font-family: 'Inter', sans-serif;
  background-color: #000;
  color: white;
  margin: 0;
  -webkit-font-smoothing: antialiased;
  user-select: none;
  touch-action: manipulation;
}

/* ЭФФЕКТ "ТОЛСТОГО" СТЕКЛА */
.ios-glass-heavy {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(60px) saturate(210%) brightness(110%);
  -webkit-backdrop-filter: blur(60px) saturate(210%) brightness(110%);

  /* Многослойные тени для имитации грани алмаза */
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.12),
    inset 0 1.5px 2px 0 rgba(255, 255, 255, 0.3), /* Верхний блик */
    0 30px 60px -12px rgba(0, 0, 0, 0.7);
  border-radius: 44px;
}

/* Слайдер громкости */
.volume-slider-track {
  @apply relative h-2 w-full bg-white/10 rounded-full overflow-hidden backdrop-blur-md;
}

/* Анимация "Жидкого" фона */
.mesh-gradient {
  position: absolute;
  width: 200%;
  height: 200%;
  top: -50%;
  left: -50%;
  background-image:
    radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%),
    radial-gradient(at 50% 0%, var(--primary-color) 0, transparent 50%),
    radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%),
    radial-gradient(at 0% 100%, var(--primary-color) 0, transparent 50%);
  filter: blur(80px);
  opacity: 0.6;
}

/* Зернистость (Film Grain) для премиального вида */
:root {
  --primary-color: #4c1d95;
  --secondary-color: #2e1065;
  --blur-radius: 80px;
  --gradient-opacity: 0.6;
}

.noise {
  position: fixed;
  inset: 0;
  z-index: 50;
  opacity: 0.035;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
}

.mesh-gradient {
  position: absolute;
  width: 200%;
  height: 200%;
  top: -50%;
  left: -50%;
  background: radial-gradient(var(--primary-color) 0, transparent 50%);
  filter: blur(var(--blur-radius));
  opacity: var(--gradient-opacity);
  pointer-events: none;
}

@media (prefers-reduced-motion: reduce) {
  .mesh-gradient { animation: none; }
}

/* Apply glass look to existing .ios-glass utility classes so old markup benefits */
.ios-glass {
  border-radius: 28px;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(150%) contrast(1.03);
  backdrop-filter: blur(var(--glass-blur)) saturate(150%) contrast(1.03);
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 18px 50px rgba(0,0,0,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
}

.ios-glass .glass-sheen { display: none; }

@media (prefers-reduced-motion: reduce) { .ios-glass { transition: none; } }

/* compatibility with older class name used in markup */
.noise-overlay { position: fixed; inset: 0; z-index: 50; opacity: 0.04; pointer-events: none; mix-blend-mode: overlay; }

/* Cover effects */
.cover { position: relative; transform-style: preserve-3d; transition: transform .18s cubic-bezier(.2,.9,.2,1); will-change: transform; }
.cover-img { transform: perspective(900px) rotateX(calc(var(--py,0) * -8deg)) rotateY(calc(var(--px,0) * 10deg)) scale(1.02); transition: transform .15s linear; }
.cover-vignette { position:absolute; inset:0; border-radius:inherit; pointer-events:none; background: radial-gradient(ellipse at center, rgba(0,0,0,0) 40%, rgba(0,0,0,0.45) 100%); mix-blend-mode:multiply; opacity:0.9 }
.cover-bloom { position:absolute; left:10%; top:6%; width:60%; height:30%; pointer-events:none; background: radial-gradient(circle, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.02) 40%, transparent 60%); filter: blur(30px); mix-blend-mode: screen; opacity:0.6; }

/* Vinyl spin subtle */
@keyframes vinylSpin { from{transform:rotate(0)} to{transform:rotate(360deg)} }
.cover-root.playing .cover-img { animation: vinylSpin 8s linear infinite; }

/* Disable SVG refraction filter on coarse pointers (mobile) */
.glass[data-filter="off"] { filter: none !important; }

/* Красивый слайдер громкости */
.volume-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  outline: none;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,0,0,0.5);
}

/* Убираем синее выделение при тапе в Telegram */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Скроллбар */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Фикс обложки */
.cover-img {
  aspect-ratio: 1 / 1;
  object-fit: cover;
}
/* Улучшенные слайдеры */
input[type=range] {
  -webkit-appearance: none;
  background: transparent;
}

input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  /* Для громкости мы скрываем стандартный ползунок, так как сделали кастомный дизайн */
  width: 0;
  height: 0;
}

/* Эффект свечения для активных элементов */
.active-glow {
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
}

/* Анимация баров Dynamic Island */
.sound-bar {
  @apply w-1 bg-white rounded-full;
  animation: soundWave 1s ease-in-out infinite;
}

@keyframes soundWave {
  0%, 100% { height: 4px; }
  50% { height: 12px; }
}

.delay-1 { animation-delay: 0.1s; }
.delay-2 { animation-delay: 0.2s; }
.delay-3 { animation-delay: 0.3s; }

/* --- iOS 26 Chat Styles --- */

/* Контейнер сообщений с маской для плавного исчезновения сверху */
.chat-mask {
  mask-image: linear-gradient(to bottom, transparent 0%, black 15%);
  -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 15%);
}

.msg-bubble {
  position: relative;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.msg-bubble::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(180deg, rgba(255,255,255,0.2), rgba(255,255,255,0));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Анимация появления сообщений (вылетают снизу с пружиной) */
@keyframes msgPop {
  0% { opacity: 0; transform: translateY(20px) scale(0.9); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

.message-appear {
  animation: msgPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}
